# 图床界面 UI 增强计划

## 一、UI 修改方案建议

### 1. 主界面 (合集/分类列表 - 修改 [`app/templates/index.html`](app/templates/index.html))
*   **布局**:
    *   将当前的 Bootstrap 卡片列表改为**响应式网格布局**（例如，每行显示 2-5 个文件夹，根据屏幕大小调整）。
    *   每个网格项代表一个图片合集（文件夹）。
*   **文件夹图标样式**:
    *   使用简洁、现代的**文件夹图标**。可以考虑使用 SVG 图标或从 Bootstrap Icons/Font Awesome 等流行的图标库中选择。
    *   为了更贴近您提供的参考图，文件夹图标下方应显示**合集名称**。
*   **文件夹封面**:
    *   在文件夹图标内部或上方，显示该合集（分类）中**最新上传的一张图片作为缩略图封面**。
    *   如果合集内没有图片，则显示一个统一的、美观的空文件夹占位图或者不显示封面，仅显示文件夹图标。
    *   这需要在后端获取合集列表时，同时获取每个合集的封面图片 URL。
*   **交互**:
    *   用户点击任一文件夹图标后，跳转到该合集的图片缩略图展示页面。

### 2. 分类内容页 (图片缩略图展示 - 修改 [`app/templates/collection.html`](app/templates/collection.html))
*   **布局**:
    *   采用**类似手机相册的响应式网格布局**，紧凑地展示图片缩略图。
    *   缩略图应尽可能保持图片的原始宽高比，或者统一裁剪成固定尺寸（如正方形）以保持视觉整齐。
*   **图片缩略图交互**:
    *   **点击缩略图**: 触发 **Lightbox 效果**，在当前页面弹出一个模态框显示更大尺寸的图片预览。
    *   **Lightbox 功能**:
        *   清晰的图片预览。
        *   导航按钮：允许用户在当前合集的图片间进行“上一张”/“下一张”切换。
        *   关闭按钮。
        *   操作按钮：例如“下载原图”、“复制图片链接”。
    *   **图片懒加载**: 如果一个合集中的图片数量较多，应实现图片懒加载，以提升页面初始加载速度和性能。
*   **导航**:
    *   提供清晰的“返回主页”或“返回合集列表”的按钮。
*   **外链处理**:
    *   在此页面**主要聚焦于图片的展示**。
    *   外链信息可以**弱化处理**，例如：
        *   不在图片缩略图界面直接展示。
        *   可以在页面底部或通过一个单独的切换按钮/标签页来显示外链列表（如果仍然需要在前台展示）。
        *   管理后台应保留完整的外链管理功能。

## 二、计划概览 (Mermaid 图)

```mermaid
graph TD
    A[用户访问首页] --> B{主界面 (index.html)};
    B -- 显示合集列表 --> C[文件夹网格布局];
    C -- 每个文件夹显示 --> D[文件夹图标 + 合集名称];
    D -- 包含 --> E[最新图片作为封面];
    C -- 点击文件夹 --> F{分类内容页 (collection.html)};
    F -- 显示图片列表 --> G[手机相册式缩略图网格];
    G -- 点击缩略图 --> H[Lightbox 图片预览];
    H -- 包含 --> I[大图 + 导航 + 下载/复制链接按钮];
    F -- 可选 --> J[弱化显示的外链列表];
    F -- 提供 --> K[返回首页按钮];

    subgraph "主界面 (index.html)"
        direction LR
        C
        D
        E
    end

    subgraph "分类内容页 (collection.html)"
        direction LR
        G
        H
        I
        J
        K
    end

    %% 后端支持
    L[后端Flask应用] --> M{StorageManager};
    M -- 提供 --> N[合集列表数据];
    M -- 提供 --> O[每个合集的封面图片URL];
    M -- 提供 --> P[特定合集的图片列表URL];
    M -- 提供 --> Q[特定合集的图片详情 (用于Lightbox)];

    N --> C;
    O --> E;
    P --> G;
    Q --> H;
```

## 三、下一步行动规划

1.  **前端 HTML 结构调整**:
    *   修改 [`app/templates/index.html`](app/templates/index.html) 以实现文件夹网格布局。
    *   修改 [`app/templates/collection.html`](app/templates/collection.html) 以实现图片缩略图网格布局和 Lightbox 结构。
2.  **CSS 样式编写**:
    *   为新的文件夹样式、缩略图样式、Lightbox 样式编写 CSS。
3.  **JavaScript 实现**:
    *   实现 Lightbox 功能（图片预览、导航、操作按钮）。
    *   实现图片懒加载（如果需要）。
4.  **后端 (Flask) 修改**:
    *   修改 [`app/storage/manager.py`](app/storage/manager.py) (或相关逻辑)：
        *   添加一个方法，用于获取指定合集的最新一张图片作为封面图。如果合集为空，返回 None 或默认占位图标识。
    *   修改 [`app/routes/main.py`](app/routes/main.py) 中的视图函数：
        *   在准备 `index.html` 的上下文数据时，为每个合集加入其封面图片的 URL。
        *   确保 `collection.html` 的上下文数据包含完整的图片信息列表，以便 Lightbox 使用。
5.  **静态资源**:
    *   准备或选择合适的文件夹图标、空文件夹占位图等静态资源。